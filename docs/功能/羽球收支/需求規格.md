# 羽球收支管理系統 PRD

## 概述

### 問題陳述

文心國際青年商會羽球社需要一個簡易的收支管理系統，用於記錄打球費用、場地費等收支項目，讓社員可以公開查閱帳務透明度，同時讓管理員可以方便地維護資料。

### 目標

- 提供透明的收支查閱介面
- 簡化管理員的帳務維護流程
- 支援 CSV 匯入匯出，與現有 Excel 資料相容

### 非目標

- 報名系統（Phase 2）
- 活動管理（Phase 2）
- 複雜的權限管理（僅區分管理員/一般人）

---

## 使用者角色

| 角色 | 說明 | 權限 |
|------|------|------|
| 一般人 | 任何訪客 | 查看收支、篩選、匯出 CSV |
| 管理員 | Google 登入的授權人員 | 新增、編輯、刪除、匯入 CSV |

---

## 使用者故事

### US-01：查看收支列表

**使用者故事**

身為一般人，
我希望查看所有收支記錄，
以便了解羽球社的帳務狀況。

**驗收條件（AC）**

- [ ] AC1：進入頁面即可看到收支表格
- [ ] AC2：表格顯示日期、地點、姓名、身分、項目、應收、已收、狀態、備註
- [ ] AC3：資料按日期降序排列（最新在前）

**RICE 評分**

| 因素 | 分數 | 說明 |
|------|------|------|
| Reach | 10 | 所有使用者 |
| Impact | 3 | 核心功能 |
| Confidence | 100% | 需求明確 |
| Effort | 1 | 基礎功能 |
| **RICE** | **30** | |

**優先級**：P0

---

### US-02：查看統計摘要

**使用者故事**

身為一般人，
我希望看到總收入、總支出、結餘，
以便快速了解整體財務狀況。

**驗收條件（AC）**

- [ ] AC1：頁面顯示三張統計卡片
- [ ] AC2：總收入 = 所有應收金額加總
- [ ] AC3：總支出 = 所有應付金額加總（負數的應收）
- [ ] AC4：結餘 = 總收入 - 總支出
- [ ] AC5：金額顯示千分位格式

**RICE 評分**

| 因素 | 分數 |
|------|------|
| Reach | 10 |
| Impact | 2 |
| Confidence | 100% |
| Effort | 0.5 |
| **RICE** | **40** |

**優先級**：P0

---

### US-03：篩選收支記錄

**使用者故事**

身為一般人，
我希望依日期範圍或姓名篩選記錄，
以便快速找到特定資料。

**驗收條件（AC）**

- [ ] AC1：提供日期起迄篩選器
- [ ] AC2：提供姓名搜尋輸入框
- [ ] AC3：篩選即時生效，無需按按鈕
- [ ] AC4：統計數字隨篩選結果更新

**RICE 評分**

| 因素 | 分數 |
|------|------|
| Reach | 8 |
| Impact | 1 |
| Confidence | 100% |
| Effort | 1 |
| **RICE** | **8** |

**優先級**：P1

---

### US-04：匯出 CSV

**使用者故事**

身為一般人，
我希望將目前資料匯出為 CSV，
以便在 Excel 中進一步分析或備份。

**驗收條件（AC）**

- [ ] AC1：點擊匯出按鈕下載 CSV 檔案
- [ ] AC2：匯出內容為目前篩選後的結果
- [ ] AC3：CSV 欄位與原始格式相同（中文欄位名）
- [ ] AC4：檔名包含匯出日期

**RICE 評分**

| 因素 | 分數 |
|------|------|
| Reach | 6 |
| Impact | 1 |
| Confidence | 100% |
| Effort | 0.5 |
| **RICE** | **12** |

**優先級**：P1

---

### US-05：管理員登入

**使用者故事**

身為管理員，
我希望透過 Google 帳號登入，
以便進入編輯模式管理資料。

**驗收條件（AC）**

- [ ] AC1：點擊登入按鈕跳轉 Google 登入
- [ ] AC2：僅允許白名單內的 email 登入
- [ ] AC3：登入後顯示登出按鈕與編輯功能
- [ ] AC4：非白名單 email 顯示權限不足提示

**RICE 評分**

| 因素 | 分數 |
|------|------|
| Reach | 3 |
| Impact | 3 |
| Confidence | 100% |
| Effort | 1 |
| **RICE** | **9** |

**優先級**：P0

---

### US-06：新增記錄

**使用者故事**

身為管理員，
我希望新增收支記錄，
以便記錄新的帳務項目。

**驗收條件（AC）**

- [ ] AC1：點擊新增按鈕開啟表單 Dialog
- [ ] AC2：必填欄位：日期、姓名、應收
- [ ] AC3：送出後表格自動更新
- [ ] AC4：統計數字自動更新

**RICE 評分**

| 因素 | 分數 |
|------|------|
| Reach | 3 |
| Impact | 3 |
| Confidence | 100% |
| Effort | 1 |
| **RICE** | **9** |

**優先級**：P0

---

### US-07：編輯記錄

**使用者故事**

身為管理員，
我希望編輯既有記錄，
以便修正錯誤或更新狀態。

**驗收條件（AC）**

- [ ] AC1：點擊編輯按鈕開啟表單 Dialog
- [ ] AC2：表單帶入現有資料
- [ ] AC3：儲存後表格自動更新
- [ ] AC4：提供取消按鈕

**RICE 評分**

| 因素 | 分數 |
|------|------|
| Reach | 3 |
| Impact | 2 |
| Confidence | 100% |
| Effort | 0.5 |
| **RICE** | **12** |

**優先級**：P0

---

### US-08：刪除記錄

**使用者故事**

身為管理員，
我希望刪除錯誤的記錄，
以便維護資料正確性。

**驗收條件（AC）**

- [ ] AC1：點擊刪除按鈕顯示確認對話框
- [ ] AC2：確認後刪除並更新表格
- [ ] AC3：提供取消按鈕

**RICE 評分**

| 因素 | 分數 |
|------|------|
| Reach | 3 |
| Impact | 1 |
| Confidence | 100% |
| Effort | 0.5 |
| **RICE** | **6** |

**優先級**：P1

---

### US-09：匯入 CSV

**使用者故事**

身為管理員，
我希望從 CSV 檔案匯入資料，
以便快速導入現有 Excel 資料。

**驗收條件（AC）**

- [ ] AC1：點擊匯入按鈕選擇 CSV 檔案
- [ ] AC2：彈性處理欄位：缺少給預設值，多餘忽略
- [ ] AC3：顯示匯入預覽與筆數
- [ ] AC4：確認後批次寫入 Firestore
- [ ] AC5：顯示匯入成功/失敗訊息

**RICE 評分**

| 因素 | 分數 |
|------|------|
| Reach | 3 |
| Impact | 2 |
| Confidence | 80% |
| Effort | 2 |
| **RICE** | **2.4** |

**優先級**：P1

---

## 優先級總覽

| 優先級 | User Story | RICE |
|--------|------------|------|
| P0 | US-02 統計摘要 | 40 |
| P0 | US-01 查看列表 | 30 |
| P0 | US-07 編輯記錄 | 12 |
| P0 | US-05 管理員登入 | 9 |
| P0 | US-06 新增記錄 | 9 |
| P1 | US-04 匯出 CSV | 12 |
| P1 | US-03 篩選記錄 | 8 |
| P1 | US-08 刪除記錄 | 6 |
| P1 | US-09 匯入 CSV | 2.4 |

---

## 技術限制

- 純前端 SPA（HTML/CSS/JS）
- Firebase Firestore 作為資料庫
- Firebase Auth（Google 登入）
- Tailwind CSS 樣式
- 無後端伺服器

---

## 成功指標

- 管理員可在 3 分鐘內完成一筆記錄的新增
- CSV 匯入 100 筆資料成功率 > 95%
- 頁面載入時間 < 2 秒
