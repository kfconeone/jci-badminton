# 羽球收支管理系統 開發計畫

小步快跑格式，每階段有可見成果

---

## 第 1 階段：建立基礎頁面結構

- **目標**：建立 index.html 基本骨架與 Tailwind CSS 整合
- **UI**：顯示標題「文心國際青年商會 羽球收支管理」與空白卡片區域
- **驗收**：瀏覽器開啟 index.html，頁面正常顯示無錯誤

**產出檔案**：
- `index.html`

---

## 第 2 階段：建立統計卡片 UI

- **目標**：建立三張統計卡片（總收入、總支出、結餘）
- **UI**：三張卡片橫排顯示，使用假資料（$10,000 / $5,000 / $5,000）
- **驗收**：卡片正確顯示，千分位格式，配色正確（收入綠/支出紅）

---

## 第 3 階段：建立資料表格 UI

- **目標**：建立收支明細表格，顯示 mock 資料
- **UI**：表格顯示 3 筆假資料，包含所有欄位
- **驗收**：表格欄位對齊，資料正確渲染，RWD 正常

---

## 第 4 階段：整合 Firebase SDK

- **目標**：引入 Firebase SDK 並設定 Firestore
- **UI**：無明顯變化
- **驗收**：Console 無錯誤，Firebase 初始化成功

**產出檔案**：
- `firebase-config.js`（設定範本）

---

## 第 5 階段：串接 Firestore 讀取資料

- **目標**：從 Firestore `accounting` collection 讀取資料
- **UI**：表格顯示真實資料（若無資料顯示空狀態）
- **驗收**：資料正確顯示，loading 狀態正常

---

## 第 6 階段：統計數字計算

- **目標**：計算並顯示真實的統計數字
- **UI**：統計卡片顯示實際計算結果
- **驗收**：總收入=應收加總，總支出=應付加總，結餘正確

---

## 第 7 階段：實作篩選功能

- **目標**：建立日期範圍與姓名搜尋篩選器
- **UI**：表格上方出現篩選列，兩個日期選擇器 + 搜尋框
- **驗收**：篩選即時生效，統計數字隨篩選結果更新

---

## 第 8 階段：實作 CSV 匯出

- **目標**：將篩選後的資料匯出為 CSV
- **UI**：點擊「匯出 CSV」按鈕下載檔案
- **驗收**：CSV 欄位正確（中文），檔名含日期

---

## 第 9 階段：整合 Firebase Auth（Google 登入）

- **目標**：實作 Google 登入/登出功能
- **UI**：右上角顯示「登入」按鈕，登入後顯示頭像與「登出」
- **驗收**：Google 登入流程正常，非白名單 email 顯示權限不足

**設定需求**：
- Firebase Console 啟用 Google 登入
- Firestore `settings/allowedEmails` 儲存白名單

---

## 第 10 階段：實作新增功能

- **目標**：建立新增記錄 Dialog 與 Firestore 寫入
- **UI**：登入後顯示「新增」按鈕，點擊開啟表單 Dialog
- **驗收**：填寫必填欄位送出後，表格與統計自動更新

---

## 第 11 階段：實作編輯功能

- **目標**：點擊表格列的編輯按鈕開啟 Dialog
- **UI**：每列顯示編輯圖示（登入後才可見）
- **驗收**：資料帶入正確，修改後更新成功

---

## 第 12 階段：實作刪除功能

- **目標**：點擊刪除按鈕顯示確認對話框
- **UI**：每列顯示刪除圖示（登入後才可見）
- **驗收**：確認後刪除，表格與統計更新

---

## 第 13 階段：實作 CSV 匯入

- **目標**：選擇 CSV 檔案並匯入至 Firestore
- **UI**：登入後顯示「匯入 CSV」按鈕，點擊開啟檔案選擇
- **驗收**：顯示預覽與筆數，確認後批次寫入，顯示結果訊息

---

## 第 14 階段：優化與收尾

- **目標**：錯誤處理、loading 狀態、空狀態優化
- **UI**：載入中顯示 skeleton，無資料顯示提示，錯誤顯示 toast
- **驗收**：各種邊界情況處理正常

---

## 階段總覽

| 階段 | 名稱 | 對應 User Story |
|------|------|-----------------|
| 1 | 基礎頁面結構 | - |
| 2 | 統計卡片 UI | US-02 |
| 3 | 資料表格 UI | US-01 |
| 4 | Firebase SDK | - |
| 5 | Firestore 讀取 | US-01 |
| 6 | 統計數字計算 | US-02 |
| 7 | 篩選功能 | US-03 |
| 8 | CSV 匯出 | US-04 |
| 9 | Google 登入 | US-05 |
| 10 | 新增功能 | US-06 |
| 11 | 編輯功能 | US-07 |
| 12 | 刪除功能 | US-08 |
| 13 | CSV 匯入 | US-09 |
| 14 | 優化收尾 | - |

---

## 里程碑

| 里程碑 | 完成階段 | 可交付成果 |
|--------|----------|------------|
| MVP-查閱版 | 1-8 | 一般人可查看、篩選、匯出 |
| MVP-管理版 | 9-13 | 管理員可完整 CRUD |
| V1.0 | 14 | 正式上線版本 |
